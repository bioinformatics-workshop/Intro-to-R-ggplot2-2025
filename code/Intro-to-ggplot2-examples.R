################################################################################### 
## Load libraries
###################################################################################
library(ggplot2)
library(reshape2) # contains the tips data

################################################################################### 
## Basic Syntax
################# DO NOT RUN ######################################################
# ggplot(data = data_file, aes(x = , y = )) + geom_layer
# 
# geom_bar()
# geom_histogram()
# geom_density()
# geom_boxplot()
# geom_point() # scatter plots
# geom_pie()

################################################################################### 
## Layering Plots
################# DO NOT RUN ######################################################
# ggplot(data = data_file, aes(x = , y = )) +
#   geom_histogram() +
#   geom_density()

################################################################################### 
## Tips Dataset
###################################################################################
head(tips)



################################################################################### 
###############      Bar Graphs     ############################################### 
################################################################################### 

################################################################################### 
## Basic Bar Graphs
###################################################################################
ggplot(data=tips, aes(x=day)) +
    geom_bar(stat="count")

################################################################################### 
## Fill the bars
###################################################################################
ggplot(data=tips, aes(x=day, fill = day)) +
    geom_bar(stat="count")

################################################################################### 
## Add border color
###################################################################################
ggplot(data=tips, aes(x=day, fill=day)) +
    geom_bar(color="black", stat="count")

################################################################################### 
## Reorder bars by day of the week
###################################################################################
tips$day <- factor(tips$day, levels = c("Thur", "Fri", "Sat", "Sun"))

ggplot(data=tips, aes(x=day, fill=day)) +
  geom_bar(color="black", stat="count")

################################################################################### 
## Remove the legend
###################################################################################
ggplot(data=tips, aes(x=day, fill=day)) +
  geom_bar(color="black", stat="count") +
  
  guides(fill="none")

################################################################################### 
## Set colors manually
###################################################################################
ggplot(data=tips, aes(x=day, fill=day)) +
  geom_bar(color="black", stat="count")+ 
  guides(fill="none") +
  
  scale_fill_manual(values = c(
    "Thur" = "#fef0d9",
    "Fri" = "#fdcc8a",
    "Sat" = "#fc8d59",
    "Sun" = "#d7301f"
  ))

################################################################################### 
## Add labels
###################################################################################
ggplot(data=tips, aes(x=day, fill=day)) +
  geom_bar(color="black", stat="count")+ 
  guides(fill="none") +
  scale_fill_manual(values = c(
    "Thur" = "#fef0d9",
    "Fri" = "#fdcc8a",
    "Sat" = "#fc8d59",
    "Sun" = "#d7301f"
  )) +
  
  labs(title = "Number of Parties Per Day of the Week", 
       caption = "Source:The tips dataset", subtitle = "A summary") +
  xlab("Day of the Week") +
  ylab("Total Number of Parties")



################################################################################### 
###############      Stacked Bar Graphs     ####################################### 
################################################################################### 

################################################################################### 
## Basic Stacked Bar Graphs
###################################################################################
ggplot(data=tips, aes(x=day, y= total_bill, fill=sex)) +
  geom_bar(stat="identity", position = position_dodge()) + 
  scale_fill_manual(values = c(
    "Female" = "#999999",
    "Male" = "#E69F00"
  )) +
  xlab("Day of the Week") +
  ylab("Total Bill ($)")



################################################################################### 
###############      Distribution Plots     ####################################### 
################################################################################### 

################################################################################### 
## Sample dataset
###################################################################################
set.seed(1234)
dat <- data.frame(cond = factor(rep(c("A","B"), each=200)), 
                   rating = c(rnorm(200),rnorm(200, mean=.8)))
# View first few rows
head(dat)



################################################################################### 
###############     Histogram - Single Group    ################################### 
################################################################################### 

################################################################################### 
## Basic histogram
###################################################################################
ggplot(dat, aes(x=rating)) + 
  geom_histogram(binwidth = 0.5)

################################################################################### 
## Border and fill colors
###################################################################################
ggplot(dat, aes(x=rating)) +
    geom_histogram(binwidth=.5, colour="white", fill="black")



################################################################################### 
###############     Density curve - Single Group   ################################ 
################################################################################### 
ggplot(dat, aes(x=rating)) + 
  geom_density(color = "#E69F00", linewidth = 2)

################################################################################### 
###############     Histogram & density plot overlay ############################## 
################################################################################### 
ggplot(dat, aes(x=rating, y = after_stat(density))) + 
    geom_histogram(binwidth=.5,
                   colour="black", fill="white") +
    geom_density(alpha=0.2, fill="#FF6666")  # Overlay with transparent density plot



################################################################################### 
###############     Histogram - Multiple Groups   ################################# 
################################################################################### 

################################################################################### 
## Overlaid histograms
###################################################################################
ggplot(dat, aes(x=rating, fill=cond)) +
    geom_histogram(binwidth=.5, alpha=.5, position="identity")

################################################################################### 
## Interleaved histograms
###################################################################################
ggplot(dat, aes(x=rating, fill=cond)) +
    geom_histogram(binwidth=.5, position="dodge")


################################################################################### 
###############     Density curves - Multiple Groups   ############################ 
################################################################################### 

################################################################################### 
## Multiple lines
###################################################################################
ggplot(dat, aes(x=rating, colour=cond)) + 
  geom_density()

################################################################################### 
## Add transparency
###################################################################################
ggplot(dat, aes(x=rating, fill=cond)) + 
  geom_density(alpha=.3)



################################################################################### 
###############    Empirical cumulative distribution function     ################# 
################################################################################### 

################################################################################### 
## CDF with points
###################################################################################
ggplot(dat, aes(rating)) + 
  stat_ecdf(geom = "point", color = "blue")

################################################################################### 
## CDF with steps
###################################################################################
ggplot(dat, aes(rating)) + 
  stat_ecdf(geom = "step", color = "red")

################################################################################### 
## CDF with smoothing
###################################################################################
ggplot(dat, aes(rating)) + 
  stat_ecdf(geom = "smooth", color = "darkgreen")

################################################################################### 
## Multiple ECDFs based on condition
###################################################################################
ggplot(dat, aes(rating, color = cond)) + 
  stat_ecdf(geom = "point") +
  scale_color_manual(values = c(
    "A" = "#E69F00",
    "B" = "#2166ac"
  ))



################################################################################### 
###############    Box Plots     ################################################## 
################################################################################### 

################################################################################### 
## Basic box plot
###################################################################################
ggplot(dat, aes(x=cond, y=rating)) + 
  geom_boxplot()

################################################################################### 
## Color by conditions
###################################################################################
ggplot(dat, aes(x=cond, y=rating, fill=cond)) + 
  geom_boxplot()

################################################################################### 
## Add data points
###################################################################################
ggplot(dat, aes(x=cond, y=rating, fill=cond)) + 
  geom_boxplot() +
  geom_jitter(width = 0.2, alpha = 0.7, size = 2, color = "darkblue")

################################################################################### 
## Flip axes
###################################################################################
ggplot(dat, aes(x=cond, y=rating, fill=cond)) + 
  geom_boxplot() + 
  geom_jitter(width = 0.2, alpha = 0.7, size = 2, color = "darkblue") +
  
  guides(fill="none") + 
  coord_flip()



################################################################################### 
###############    Scatter Plots     ################################################## 
################################################################################### 

################################################################################### 
## Sample dataset
###################################################################################
set.seed(955)
# Make some noisily increasing data
dat2 <- data.frame(cond = rep(c("A", "B"), each=10),
                  xvar = 1:20 + rnorm(20,sd=3),
                  yvar = 1:20 + rnorm(20,sd=3))
head(dat2)

################################################################################### 
## Basic scatterplot
###################################################################################
ggplot(dat2, aes(x=xvar, y=yvar)) +
    geom_point(shape=5)      # Use hollow circles

################################################################################### 
## Add regression line
###################################################################################
ggplot(dat2, aes(x=xvar, y=yvar)) +
    geom_point(shape=1) +    # Use hollow circles
    geom_smooth(method=lm)   # Add linear regression line 

################################################################################### 
## Regression line without shaded region
###################################################################################
ggplot(dat2, aes(x=xvar, y=yvar)) +
    geom_point(shape=1) +    # Use hollow circles
    geom_smooth(method=lm,   # Add linear regression line
                se=FALSE)    # Don't add shaded confidence region

################################################################################### 
## Loess smoothed fit curve
###################################################################################
ggplot(dat2, aes(x=xvar, y=yvar)) +
  geom_point(shape=1) +    # Use hollow circles
  geom_smooth()            # Add a loess smoothed fit curve with confidence region



################################################################################### 
###############    Facets        ################################################## 
################################################################################### 

sp <- ggplot(tips, aes(x=total_bill, y=tip/total_bill)) + 
  geom_point(shape=1)
sp

################################################################################### 
## Divide by Levels Vertically
###################################################################################
sp + facet_grid(sex ~ .)

################################################################################### 
## Divide by Levels Vertically
###################################################################################
sp + facet_grid(. ~ sex)

################################################################################### 
## Divide by multiple levels
###################################################################################
sp + facet_grid(sex ~ day)

################################################################################### 
## Divide by day but split into two columns
###################################################################################
sp + facet_wrap( ~ day, ncol=2)

################################################################################### 
## Color facets strips
###################################################################################
sp + facet_wrap( ~ day, ncol=2, ) +
  theme(strip.background = element_rect(fill = "#92c5de"))



################################################################################### 
###############    Saving Plots        ############################################ 
################################################################################### 

################################################################################### 
## Using ggsave
################# DO NOT RUN ######################################################
# ggsave(plotname, filename, output_parameters)
# 
# plt <- ggplot(data, aes(ratings)) + geom_hist()
# ggsave(plt, "histogram_plot.pdf", width = 4, height = 4, dpi = 300)

################################################################################### 
## Using baseR
################# DO NOT RUN ######################################################
# # PDFs
# pdf("plots.pdf") #svg
# plot(...)
# plot(...)
# dev.off()
# 
# # PNG/TIFF
# png("plot.png") # or tiff("plot.tiff")
# plot(...)
# dev.off()
# 
# # resizing plot
# png("plot.png", width=480, height=240, res=120)
# plot(...)
# dev.off()
